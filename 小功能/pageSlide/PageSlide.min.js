var PageSlide=function(d,b,a,e,c){this.options=c||{};this.current=0;this.pageX;this.pageY;this.height;this.width;this.flag;this.move;this.$el=d;this.swipe=b||"X";this.pagenation=a||"";this.timer=e||"3000";this.resize().init().bindEvents()};PageSlide.prototype={constructor:PageSlide,init:function(b){var e=this,d=b?e.$el.children[b]:e.$el.firstElementChild;if(!d){throw"ERROR"}d.classList.add("moving");d.style.webkitTransform="translate3d(0,0,0)";for(var b=1;b<e.$el.children.length;b++){e["set"+e.swipe](e.$el.children[b],(e.swipe==="X"?e.width:e.height))}setTimeout(function(){d.classList.remove("moving");d.classList.add("play")},3000);var c=e.pagenation.getElementsByTagName("span");for(var a=0;a<c.length;a++){c[a].index=a;c[a].onclick=function(){e.pageActive(this.index);e.direct(this.index)}}e.autoScroll();return e},autoScroll:function(){var a=this;var b=setInterval(function(){if(a.current<4){a.next()}else{a.current=0;a.pageActive(a.current);a.init();clearInterval(b)}},a.timer)},pageActive:function(b){var a=this.pagenation.getElementsByTagName("span");for(var c=0;c<a.length;c++){a[c].className="";a[b].className="active"}},bindEvents:function(){var a=this;window.addEventListener("resize orientationchange",this.resize.bind(this),false);"touchstart touchmove touchend touchcancel".split(" ").forEach(function(b){a.$el.addEventListener(b,a[b].bind(a),false)})},getCurrent:function(){return this.$el.children[this.current]},resize:function(){this.width=this.$el.parentNode.clientWidth;this.height=this.$el.parentNode.clientHeight;return this},random:function(){var d=this.$el.children.length;var e=this.current;var a=[];var b;for(var c=0;c<d;c++){if(c!==e){a.push(c.toString())}}b=Math.floor(Math.random()*a.length);this.direct(+a[b])},touchstart:function(b){var a=b.touches[0];this.flag=null;this.move=0;this.pageX=a.pageX;this.pageY=a.pageY},touchmove:function(f){var d=f.touches[0];var h=d.pageX-this.pageX;var g=d.pageY-this.pageY;var c=this.getCurrent();var a=c.nextElementSibling;var b=c.previousElementSibling;if(!this.flag){this.flag=Math.abs(h)>Math.abs(g)?"X":"Y";if(this.flag===this.swipe){c.classList.add("moving");a&&a.classList.add("moving");b&&b.classList.add("moving")}}if(this.flag===this.swipe){f.preventDefault();f.stopPropagation();switch(this.swipe){case"X":this.move=h;this.setX(c,h);a&&(this.setX(a,h+this.width));b&&(this.setX(b,h-this.width));break;case"Y":this.move=g;this.setY(c,g);a&&(this.setY(a,g+this.height));b&&(this.setY(b,g-this.height));break}}},touchend:function(g){var b=50;var a=this.move;var f=this.getCurrent();var c=f.nextElementSibling;var d=f.previousElementSibling;f.classList.remove("moving");c&&c.classList.remove("moving");d&&d.classList.remove("moving");if(!this.flag){return}g.preventDefault();if(a<-b&&c){return this.next()}if(a>b&&d){return this.prev()}this.reset()},touchcancel:function(d){var c=this.getCurrent();var a=c.nextElementSibling;var b=c.previousElementSibling;c.classList.remove("moving");a&&a.classList.remove("moving");b&&b.classList.remove("moving");this.reset()},setX:function(b,a,c){b&&(b.style.webkitTransform="translate3d("+a+(c||"px")+",0,0)")},setY:function(a,c,b){a&&(a.style.webkitTransform="translate3d(0,"+c+(b||"px")+",0)")},setCurrent:function(b,a){b&&(b.style.webkitTransform="translate3d(0,0,0)");if(a){this.current=a;this.$current=this.$el.children[a]}},next:function(){this.pageActive(this.current+1);this.go(this.current+1)},prev:function(){this.pageActive(this.current-1);this.go(this.current-1)},reset:function(){var d=this.width;var a=this.height;var b=this.swipe;var f=this.getCurrent();var e=f.previousElementSibling;var c=f.nextElementSibling;this.setCurrent(f);e&&(this["set"+b](e,-(b==="X"?d:a)));c&&(this["set"+b](c,b==="X"?d:a))},go:function(a){var c=this.options.onFinish;var f=this.getCurrent();var b=this.$el.childElementCount;var e=this.$el.children[a];var g=a<this.current?-1:1;if(a===this.current||a<0||a>=b){return}if(c&&(typeof c==="function")){c.call(this,a)}typeof this.options.tranSetionEnd==="function"&&this.options.tranSetionEnd.call(this);this.current=a;this["set"+this.swipe](f,-g*(this.swipe==="X"?this.width:this.height));this.setCurrent(e,a);this.finish(f,e)},finish:function(b,a){this.flag=null;setTimeout(function(){b&&b.classList.remove("play");a&&a.classList.add("play")},300)},direct:function(b){if(b&&typeof(b)==="number"){this.go(b);for(var a=0;a<b;a++){this["set"+this.swipe](this.$el.children[a],-1*(this.swipe==="X"?this.width:this.height))}}else{return}}};